<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <button>1111</button>
    <button>2222</button>
    <button>3333</button>
    <p id="p">第一张图片</p>
    <input type="button" value="后退" id="btn">
    <script>
    /*
    history:
        浏览器的历史记录，能够使用前进后退，还可以伪造一个url地址
        他的方法：
        back：返回
        forward：前进
        go（1）：前进；  go（-1）：后退
        pushState 记录url状态的
        replaceState 替换历史记录
        pushState(数据，null（取名字不是所有的浏览器都支持，站位），伪造的url)这个数据会存到事件对象的state里面
        注意：伪造的url如果没有服务器配合，不能刷新页面，因为刷新页面相当于去服务器上找文件，并没有，会报错404


    */
    let ary =['第一张图片','第二张图片','第三张图片']
    let btns =document.querySelectorAll('button')
    btns.forEach((item,i)=>{
        item.onclick=function(){
            p.innerText=ary[i]
            window.history.pushState({num:i},'suibian','http://localhost/history6.html/'+i)//{num:i}会存在事件对象的states里面
        }
    })
    btn.onclick =function(){
        window.history.back()
    }

    // window.history.pushState({num:0},'suibian','http://localhost/histroy6.html/1')
    //当操作历史记录的时候去触发这个事件
    window.onpopstate=function(ev){
        p.innerText=ary[ev.state.num]
      
    }
    </script>
</body>
</html>
